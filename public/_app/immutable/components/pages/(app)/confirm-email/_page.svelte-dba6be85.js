import{S as $,i as w,s as k,k as p,l as d,m as h,h as m,n as _,b,f,t as g,d as C,K as E,o as P,w as D,a as I,q as V,x as j,c as q,r as z,y as S,J as u,z as J,g as K}from"../../../../chunks/index-2a327d32.js";import{g as x}from"../../../../chunks/navigation-6a7bdca7.js";import{p as M}from"../../../../chunks/stores-32538211.js";import{u as R}from"../../../../chunks/client-5fc005f9.js";import{s as A}from"../../../../chunks/sleep-0a5b7361.js";/* empty css                                                               */import{C as B}from"../../../../chunks/Circle3-5fb1e28d.js";async function F(r){return await R.post("confirm_email",r)}function v(r){let e,n,t,a,s,l;return n=new B({props:{size:"60",unit:"px",duration:"1s"}}),{c(){e=p("div"),D(n.$$.fragment),t=I(),a=p("div"),s=V("Confirming Email"),this.h()},l(i){e=d(i,"DIV",{class:!0});var o=h(e);j(n.$$.fragment,o),t=q(o),a=d(o,"DIV",{class:!0});var c=h(a);s=z(c,"Confirming Email"),c.forEach(m),o.forEach(m),this.h()},h(){_(a,"class","mt-3 text-black font-mono text-lg sm:text-md"),_(e,"class","flex flex-col pb-[100px] w-full justify-center items-center")},m(i,o){b(i,e,o),S(n,e,null),u(e,t),u(e,a),u(a,s),l=!0},i(i){l||(f(n.$$.fragment,i),l=!0)},o(i){g(n.$$.fragment,i),l=!1},d(i){i&&m(e),J(n)}}}function G(r){let e,n,t=r[0]&&v();return{c(){e=p("div"),t&&t.c(),this.h()},l(a){e=d(a,"DIV",{class:!0});var s=h(e);t&&t.l(s),s.forEach(m),this.h()},h(){_(e,"class","inset-0 bg-white flex w-full items-center justify-center duration-300 transition-opacity min-h-[100vh]")},m(a,s){b(a,e,s),t&&t.m(e,null),n=!0},p(a,[s]){a[0]?t?s&1&&f(t,1):(t=v(),t.c(),f(t,1),t.m(e,null)):t&&(K(),g(t,1,1,()=>{t=null}),C())},i(a){n||(f(t),n=!0)},o(a){g(t),n=!1},d(a){a&&m(e),t&&t.d()}}}function H(r,e,n){let t;E(r,M,s=>n(1,t=s));let a=!0;return P(async()=>{const s=t.url.searchParams.get("email")||"",l=t.url.searchParams.get("token")||"",i=t.url.searchParams.get("business_id")||"";(s==null||l==null)&&document.location.replace("/login");let o={email:s,user_name:"",confirmation_code:"",business_id:i,token:l};console.log("confirm data",o),await F(o).then(async c=>{let y=c;await A(1e3).then(()=>{console.log(y),x("/login")})}).catch(c=>{console.log("could not confirm user's email",c),x("/confirm-email/inform")}),n(0,a=!1)}),[a]}class X extends ${constructor(e){super(),w(this,e,H,G,k,{})}}export{X as default};
