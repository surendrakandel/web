import{S as _e,i as me,s as we,k as m,q as N,a as E,l as w,m as g,r as k,h,c as y,n as s,b as x,J as a,P as J,M as A,B as ie,D as he,K as ve,o as be,u as fe}from"../../../../chunks/index-2a327d32.js";import{t as ne}from"../../../../chunks/SvelteToast.svelte_svelte_type_style_lang-be24e2c6.js";import{I as ge,E as Pe}from"../../../../chunks/toast_options-4765ddd4.js";import{g as de}from"../../../../chunks/navigation-6a7bdca7.js";import{p as Ee}from"../../../../chunks/stores-32538211.js";import{i as pe}from"../../../../chunks/valid_password-6bd2121f.js";import{i as ye}from"../../../../chunks/valid_email-ea157053.js";import{u as Ie}from"../../../../chunks/client-5fc005f9.js";async function Ne(i){return await Ie.post("reset_password",i)}function ue(i){let t,r=i[1].valid_password_message+"",u;return{c(){t=m("div"),u=N(r),this.h()},l(l){t=w(l,"DIV",{class:!0});var e=g(t);u=k(e,r),e.forEach(h),this.h()},h(){s(t,"class","text-error")},m(l,e){x(l,t,e),a(t,u)},p(l,e){e&2&&r!==(r=l[1].valid_password_message+"")&&fe(u,r)},d(l){l&&h(t)}}}function ce(i){let t,r=i[1].match_password_message+"",u;return{c(){t=m("div"),u=N(r),this.h()},l(l){t=w(l,"DIV",{class:!0});var e=g(t);u=k(e,r),e.forEach(h),this.h()},h(){s(t,"class","text-error")},m(l,e){x(l,t,e),a(t,u)},p(l,e){e&2&&r!==(r=l[1].match_password_message+"")&&fe(u,r)},d(l){l&&h(t)}}}function ke(i){let t,r,u,l,e,P,T,p,o,B,H,I,S,U,n,K,M,L,W,j,v,z,O,C,F,G,D,V,Q,X,R,Y,Z,$,f=i[1].valid_password==!1&&ue(i),_=i[1].valid_password_match==!1&&ce(i);return{c(){t=m("div"),r=m("h2"),u=N("Reset Password"),l=E(),e=m("div"),P=m("label"),T=N("Email"),p=E(),o=m("input"),H=E(),I=m("label"),S=N("New Password"),U=E(),n=m("input"),K=E(),f&&f.c(),M=E(),L=m("label"),W=N("Retype password"),j=E(),v=m("input"),z=E(),_&&_.c(),O=E(),C=m("button"),F=N("Submit"),G=E(),D=m("div"),V=m("h3"),Q=N("Have no account?"),X=E(),R=m("a"),Y=N("Create one"),this.h()},l(c){t=w(c,"DIV",{class:!0});var b=g(t);r=w(b,"H2",{class:!0});var ee=g(r);u=k(ee,"Reset Password"),ee.forEach(h),l=y(b),e=w(b,"DIV",{class:!0});var d=g(e);P=w(d,"LABEL",{class:!0,for:!0});var se=g(P);T=k(se,"Email"),se.forEach(h),p=y(d),o=w(d,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),H=y(d),I=w(d,"LABEL",{class:!0,for:!0});var ae=g(I);S=k(ae,"New Password"),ae.forEach(h),U=y(d),n=w(d,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),K=y(d),f&&f.l(d),M=y(d),L=w(d,"LABEL",{class:!0,for:!0});var te=g(L);W=k(te,"Retype password"),te.forEach(h),j=y(d),v=w(d,"INPUT",{type:!0,id:!0,name:!0,class:!0,placeholder:!0}),z=y(d),_&&_.l(d),O=y(d),C=w(d,"BUTTON",{type:!0,class:!0});var re=g(C);F=k(re,"Submit"),re.forEach(h),G=y(d),D=w(d,"DIV",{class:!0});var q=g(D);V=w(q,"H3",{class:!0});var le=g(V);Q=k(le,"Have no account?"),le.forEach(h),X=y(q),R=w(q,"A",{href:!0,class:!0});var oe=g(R);Y=k(oe,"Create one"),oe.forEach(h),q.forEach(h),d.forEach(h),b.forEach(h),this.h()},h(){s(r,"class","my-5 text-lg font-bold"),s(P,"class",""),s(P,"for","new_password"),s(o,"type","email"),s(o,"name","new_password"),s(o,"id","new_password"),s(o,"class","input"),o.value=B=i[0].email,o.disabled=!0,s(o,"placeholder","New Password"),s(I,"class",""),s(I,"for","new_password"),s(n,"type","password"),s(n,"name","new_password"),s(n,"id","new_password"),s(n,"class","input"),s(n,"placeholder","New Password"),s(L,"class",""),s(L,"for","confirm_password"),s(v,"type","password"),s(v,"id","confirm_password"),s(v,"name","confirm_password"),s(v,"class","input"),s(v,"placeholder","Confirm Password"),s(C,"type","submit"),s(C,"class","btn btn-primary text-uppercase max-w-[250px] mt-5"),s(V,"class","font-bold text-md"),s(R,"href","/sign-up"),s(R,"class","text-xl text-[#5CB971] font-bold underline underline-offset-4 ml-4 inline"),s(D,"class","flex items-center h-[50px]"),s(e,"class","cardWrapper p-5 min-w-[600px] gap-3"),s(t,"class","bg-white min-h-[700px] flex flex-col items-center")},m(c,b){x(c,t,b),a(t,r),a(r,u),a(t,l),a(t,e),a(e,P),a(P,T),a(e,p),a(e,o),a(e,H),a(e,I),a(I,S),a(e,U),a(e,n),J(n,i[0].new_password),a(e,K),f&&f.m(e,null),a(e,M),a(e,L),a(L,W),a(e,j),a(e,v),J(v,i[0].confirm_password),a(e,z),_&&_.m(e,null),a(e,O),a(e,C),a(C,F),a(e,G),a(e,D),a(D,V),a(V,Q),a(D,X),a(D,R),a(R,Y),Z||($=[A(o,"change",i[3]),A(n,"change",i[3]),A(n,"input",i[5]),A(v,"change",i[4]),A(v,"input",i[6]),A(C,"click",i[2])],Z=!0)},p(c,[b]){b&1&&B!==(B=c[0].email)&&o.value!==B&&(o.value=B),b&1&&n.value!==c[0].new_password&&J(n,c[0].new_password),c[1].valid_password==!1?f?f.p(c,b):(f=ue(c),f.c(),f.m(e,M)):f&&(f.d(1),f=null),b&1&&v.value!==c[0].confirm_password&&J(v,c[0].confirm_password),c[1].valid_password_match==!1?_?_.p(c,b):(_=ce(c),_.c(),_.m(e,O)):_&&(_.d(1),_=null)},i:ie,o:ie,d(c){c&&h(t),f&&f.d(),_&&_.d(),Z=!1,he($)}}}function Ce(i,t,r){let u;ve(i,Ee,n=>r(11,u=n));let l=!1,e=!1,P="",T="";T=u.url.searchParams.get("token")||"",P=u.url.searchParams.get("email")||"";let p={token:T,new_password:"",confirm_password:"",email:P};be(async()=>{T||await de("/forgotpassword")});let o={valid_password_message:"Please choose stronger password with 1 number, 1 capital letter, 1 symbol and must be 8 characters long.",match_password_message:"New Password and Confirm Password does not match.",valid_password:!0,valid_password_match:!0};function B(){if(!!l)if(l=pe(p.confirm_password),l=ye(P),l&&p.new_password==p.confirm_password)r(1,o.valid_password_match=!0,o),r(1,o.valid_password=!0,o),Ne(p).then(n=>{ne.push(n==null?void 0:n.message,ge),de("/login?email="+p.email),console.log(n)}).catch(n=>{console.log(n),ne.push("could not reset password. please try later.",Pe)});else return}function H(){e=!0,l=pe(p.new_password),l?r(1,o.valid_password=!0,o):(r(1,o.valid_password=!1,o),e=!1,l=!1),p.confirm_password!=""&&I()}function I(){!e||(p.new_password!=p.confirm_password?(r(1,o.valid_password_match=!1,o),l=!1):r(1,o.valid_password_match=!0,o))}function S(){p.new_password=this.value,r(0,p)}function U(){p.confirm_password=this.value,r(0,p)}return[p,o,B,H,I,S,U]}class Se extends _e{constructor(t){super(),me(this,t,Ce,ke,we,{})}}export{Se as default};
